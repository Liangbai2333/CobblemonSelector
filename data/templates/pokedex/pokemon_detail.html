<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ pokemon.name }} - 宝可梦图鉴</title>
    <style>
        :root {
            --primary-color: #4285F4;
            --accent-color: #34A853;
            --light-bg: #f5f8ff;
            --card-bg: #ffffff;
            --text-color: #333333;
            --text-secondary: #666666;
            --border-color: #e0e6f0;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
        }

        body {
            font-family: 'Arial', 'Helvetica', sans-serif;
            background-color: var(--light-bg);
            margin: 0;
            padding: 12px;
            color: var(--text-color);
            font-size: 14px;
            line-height: 1.4;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        /* 头部区域 */
        .header {
            background: linear-gradient(135deg, var(--primary-color), #5b9aff);
            color: white;
            padding: 12px 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .pokemon-name-container {
            display: flex;
            align-items: baseline;
        }

        .pokemon-number {
            font-size: 0.9em;
            font-weight: 500;
            margin-right: 8px;
            opacity: 0.9;
        }

        .header h1 {
            margin: 0;
            font-size: 1.5em;
            font-weight: 600;
        }

        /* 类型标签 */
        .pokemon-types {
            display: flex;
            gap: 6px;
        }

        .type {
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            color: white;
            text-align: center;
            font-weight: 500;
            letter-spacing: 0.5px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        /* 类型颜色 */
        .normal { background-color: #A8A878; }
        .fire { background-color: #F08030; }
        .water { background-color: #6890F0; }
        .grass { background-color: #78C850; }
        .electric { background-color: #F8D030; }
        .ice { background-color: #98D8D8; }
        .fighting { background-color: #C03028; }
        .poison { background-color: #A040A0; }
        .ground { background-color: #E0C068; }
        .flying { background-color: #A890F0; }
        .psychic { background-color: #F85888; }
        .bug { background-color: #A8B820; }
        .rock { background-color: #B8A038; }
        .ghost { background-color: #705898; }
        .dragon { background-color: #7038F8; }
        .dark { background-color: #705848; }
        .steel { background-color: #B8B8D0; }
        .fairy { background-color: #EE99AC; }

        /* 主要内容区域 */
        .content {
            padding: 0;
        }

        /* 图片和基本信息区域 */
        .pokemon-card {
            display: flex;
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .pokemon-image-container {
            width: 110px;
            height: 110px;
            flex-shrink: 0;
            background-color: rgba(245, 248, 255, 0.8);
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
        }

        .pokemon-image {
            width: 90px;
            height: 90px;
            object-fit: contain;
        }

        .pokemon-info {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            align-content: start;
        }

        .info-item {
            margin-bottom: 4px;
        }

        .info-label {
            font-size: 0.75em;
            color: var(--text-secondary);
            display: block;
            margin-bottom: 2px;
        }

        .info-value {
            font-size: 0.9em;
            font-weight: 500;
        }

        /* 两列布局区域 */
        .two-column-section {
            display: flex;
            border-bottom: 1px solid var(--border-color);
        }

        .column {
            flex: 1;
            padding: 15px;
        }

        .column:first-child {
            border-right: 1px solid var(--border-color);
        }

        .section-title {
            font-size: 0.95em;
            color: var(--primary-color);
            margin: 0 0 10px 0;
            font-weight: 600;
        }

        /* 种族值 */
        .stat-row {
            display: flex;
            align-items: center;
            margin-bottom: 6px;
        }

        .stat-label {
            width: 40px;
            font-size: 0.85em;
            font-weight: 500;
        }

        .stat-value {
            width: 30px;
            text-align: right;
            font-size: 0.85em;
            margin-right: 8px;
            font-weight: 500;
        }

        .stat-bar-container {
            flex: 1;
            height: 6px;
            background-color: #edf1f8;
            border-radius: 3px;
            overflow: hidden;
        }

        .stat-bar-fill {
            height: 100%;
            background-color: var(--accent-color);
        }

        /* 描述文本区域 */
        .description-section {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .description-text {
            margin: 0;
            line-height: 1.5;
            font-size: 0.95em;
        }

        /* 进化链 */
        .evolution-section {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .evolution-chain {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .evolution-item {
            text-align: center;
            font-weight: 500;
        }

        .evolution-arrow {
            margin: 0 10px;
            color: var(--text-secondary);
            font-size: 1.2em;
        }

        .evolution-level {
            font-size: 0.8em;
            color: var(--text-secondary);
            margin-top: 3px;
        }

        /* 招式列表 */
        .moves-section {
            padding: 15px;
        }

        .moves-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .move-item {
            background-color: #edf1f8;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 头部区域 -->
        <div class="header">
            <div class="pokemon-name-container">
                <span class="pokemon-number">#{{ pokemon.get_pokedex() }}</span>
                <h1>{{ pokemon.get_i18n_name() }} ( {{ pokemon.name }} )</h1>
            </div>

            <div class="pokemon-types">
                {% if pokemon.primaryType is defined %}
                <span class="type {{ pokemon.primaryType }}">
                    {% if pokemon.primaryType == 'normal' %}一般
                    {% elif pokemon.primaryType == 'fire' %}火
                    {% elif pokemon.primaryType == 'water' %}水
                    {% elif pokemon.primaryType == 'grass' %}草
                    {% elif pokemon.primaryType == 'electric' %}电
                    {% elif pokemon.primaryType == 'ice' %}冰
                    {% elif pokemon.primaryType == 'fighting' %}格斗
                    {% elif pokemon.primaryType == 'poison' %}毒
                    {% elif pokemon.primaryType == 'ground' %}地面
                    {% elif pokemon.primaryType == 'flying' %}飞行
                    {% elif pokemon.primaryType == 'psychic' %}超能力
                    {% elif pokemon.primaryType == 'bug' %}虫
                    {% elif pokemon.primaryType == 'rock' %}岩石
                    {% elif pokemon.primaryType == 'ghost' %}幽灵
                    {% elif pokemon.primaryType == 'dragon' %}龙
                    {% elif pokemon.primaryType == 'dark' %}恶
                    {% elif pokemon.primaryType == 'steel' %}钢
                    {% elif pokemon.primaryType == 'fairy' %}妖精
                    {% else %}{{ pokemon.primaryType }}
                    {% endif %}
                </span>
                {% endif %}

                {% if pokemon.secondaryType is defined and pokemon.secondaryType != None %}
                <span class="type {{ pokemon.secondaryType }}">
                    {% if pokemon.secondaryType == 'normal' %}一般
                    {% elif pokemon.secondaryType == 'fire' %}火
                    {% elif pokemon.secondaryType == 'water' %}水
                    {% elif pokemon.secondaryType == 'grass' %}草
                    {% elif pokemon.secondaryType == 'electric' %}电
                    {% elif pokemon.secondaryType == 'ice' %}冰
                    {% elif pokemon.secondaryType == 'fighting' %}格斗
                    {% elif pokemon.secondaryType == 'poison' %}毒
                    {% elif pokemon.secondaryType == 'ground' %}地面
                    {% elif pokemon.secondaryType == 'flying' %}飞行
                    {% elif pokemon.secondaryType == 'psychic' %}超能力
                    {% elif pokemon.secondaryType == 'bug' %}虫
                    {% elif pokemon.secondaryType == 'rock' %}岩石
                    {% elif pokemon.secondaryType == 'ghost' %}幽灵
                    {% elif pokemon.secondaryType == 'dragon' %}龙
                    {% elif pokemon.secondaryType == 'dark' %}恶
                    {% elif pokemon.secondaryType == 'steel' %}钢
                    {% elif pokemon.secondaryType == 'fairy' %}妖精
                    {% else %}{{ pokemon.secondaryType }}
                    {% endif %}
                </span>
                {% endif %}
            </div>
        </div>

        <div class="content">
            <!-- 图片和基本信息区域 -->
            <div class="pokemon-card">
                <div class="pokemon-image-container">
                    <img src="{{ pokemon.get_image_url() }}" alt="{{ pokemon.get_i18n_name() }}" class="pokemon-image">
                </div>

                <div class="pokemon-info">
                    <div class="info-item">
                        <span class="info-label">身高</span>
                        <span class="info-value">{{ (pokemon.height / 10) if pokemon.height is defined else '暂无数据' }} 米</span>
                    </div>

                    <div class="info-item">
                        <span class="info-label">体重</span>
                        <span class="info-value">{{ (pokemon.weight / 10) if pokemon.weight is defined else '暂无数据' }} 千克</span>
                    </div>

                    <div class="info-item">
                        <span class="info-label">特性</span>
                        <span class="info-value">
                            {% if pokemon.ability_sets is defined and pokemon.ability_sets %}
                                {% set abilities = [] %}
                                {% for ability in pokemon.ability_sets %}
                                    {% if ability.prefix == 'h' %}
                                        {% set _ = abilities.append(ability.get_i18n_name() + '（隐藏）') %}
                                    {% else %}
                                        {% set _ = abilities.append(ability.get_i18n_name()) %}
                                    {% endif %}
                                {% endfor %}
                                {{ abilities|join(', ') }}
                            {% else %}
                                暂无数据
                            {% endif %}
                        </span>
                    </div>

                    {% if pokemon.maleRatio is defined %}
                    <div class="info-item">
                        <span class="info-label">性别比例</span>
                        <span class="info-value">♂{{ (pokemon.maleRatio * 100)|round(1) }}% : ♀{{ (100 - (pokemon.maleRatio * 100))|round(1) }}%</span>
                    </div>
                    {% endif %}

                    {% if pokemon.egg_group_sets is defined and pokemon.egg_group_sets %}
                    <div class="info-item">
                        <span class="info-label">蛋组</span>
                        <span class="info-value">
                            {% set egg_groups = [] %}
                            {% for egg_group in pokemon.egg_group_sets %}
                                {% set _ = egg_groups.append(egg_group.get_i18n_name()) %}
                            {% endfor %}
                            {{ egg_groups|join(', ') }}
                        </span>
                    </div>
                    {% endif %}

                    {% if pokemon.catchRate is defined %}
                    <div class="info-item">
                        <span class="info-label">捕获率</span>
                        <span class="info-value">{{ pokemon.catchRate }}</span>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- 种族值和简介 - 两列布局 -->
            <div class="two-column-section">
                <!-- 左列：种族值 -->
                <div class="column">
                    <h2 class="section-title">种族值</h2>

                    <div class="stat-row">
                        <div class="stat-label">HP</div>
                        <div class="stat-value">{{ pokemon.baseStats.hp }}</div>
                        <div class="stat-bar-container">
                            <div class="stat-bar-fill" style="width: {{ (pokemon.baseStats.hp / 255) * 100 }}%;"></div>
                        </div>
                    </div>

                    <div class="stat-row">
                        <div class="stat-label">攻击</div>
                        <div class="stat-value">{{ pokemon.baseStats.attack }}</div>
                        <div class="stat-bar-container">
                            <div class="stat-bar-fill" style="width: {{ (pokemon.baseStats.attack / 255) * 100 }}%;"></div>
                        </div>
                    </div>

                    <div class="stat-row">
                        <div class="stat-label">防御</div>
                        <div class="stat-value">{{ pokemon.baseStats.defence }}</div>
                        <div class="stat-bar-container">
                            <div class="stat-bar-fill" style="width: {{ (pokemon.baseStats.defence / 255) * 100 }}%;"></div>
                        </div>
                    </div>

                    <div class="stat-row">
                        <div class="stat-label">特攻</div>
                        <div class="stat-value">{{ pokemon.baseStats.special_attack }}</div>
                        <div class="stat-bar-container">
                            <div class="stat-bar-fill" style="width: {{ (pokemon.baseStats.special_attack / 255) * 100 }}%;"></div>
                        </div>
                    </div>

                    <div class="stat-row">
                        <div class="stat-label">特防</div>
                        <div class="stat-value">{{ pokemon.baseStats.special_defence }}</div>
                        <div class="stat-bar-container">
                            <div class="stat-bar-fill" style="width: {{ (pokemon.baseStats.special_defence / 255) * 100 }}%;"></div>
                        </div>
                    </div>

                    <div class="stat-row">
                        <div class="stat-label">速度</div>
                        <div class="stat-value">{{ pokemon.baseStats.speed }}</div>
                        <div class="stat-bar-container">
                            <div class="stat-bar-fill" style="width: {{ (pokemon.baseStats.speed / 255) * 100 }}%;"></div>
                        </div>
                    </div>
                </div>

                <!-- 右列：简介 -->
                <div class="column">
                    <h2 class="section-title">宝可梦简介</h2>
                    <p class="description-text">{{ pokemon.get_i18n_desc() }}</p>
                </div>
            </div>

            <!-- 进化链 -->
            {% if pokemon.evolution_chain is defined and pokemon.evolution_chain %}
            <div class="evolution-section">
                <h2 class="section-title">进化</h2>
                <div class="evolution-chain">
                    {% macro render_evolution_chain(pokemon_obj, is_current=false) %}
                        <div class="evolution-item {% if is_current %}current{% endif %}">
                            <div>{{ pokemon_obj.get_i18n_name() }}</div>
                        </div>

                        {% if pokemon_obj.evolution_chain and pokemon_obj.evolution_chain.evolution_conditions %}
                            {% for condition in pokemon_obj.evolution_chain.evolution_conditions %}
                                <div class="evolution-arrow">→</div>
                                <div class="evolution-item">
                                    <div>{{ condition.evolution.get_i18n_name() }}</div>
                                    <div class="evolution-level">
                                        {% if condition.condition == 'level' %}
                                            Lv.{{ condition.value }}
                                        {% elif condition.condition == 'friendship' %}
                                            友好度 {{ condition.value }}
                                        {% else %}
                                            {{ condition.condition }}: {{ condition.value }}
                                        {% endif %}
                                    </div>
                                </div>

                                {% if condition.evolution.evolution_chain and condition.evolution.evolution_chain.evolution_conditions %}
                                    {% for next_condition in condition.evolution.evolution_chain.evolution_conditions %}
                                        <div class="evolution-arrow">→</div>
                                        <div class="evolution-item">
                                            <div>{{ next_condition.evolution.get_i18n_name() }}</div>
                                            <div class="evolution-level">
                                                {% if next_condition.condition == 'level' %}
                                                    Lv.{{ next_condition.value }}
                                                {% elif next_condition.condition == 'friendship' %}
                                                    友好度 {{ next_condition.value }}
                                                {% else %}
                                                    {{ next_condition.condition }}: {{ next_condition.value }}
                                                {% endif %}
                                            </div>
                                        </div>
                                    {% endfor %}
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    {% endmacro %}

                    {% if pokemon.evolution_chain.pre_evolution %}
                        {% set root_pokemon = pokemon.evolution_chain.pre_evolution %}
                        {% if root_pokemon.evolution_chain and root_pokemon.evolution_chain.pre_evolution %}
                            {% set root_pokemon = root_pokemon.evolution_chain.pre_evolution %}
                        {% endif %}
                        {{ render_evolution_chain(root_pokemon) }}
                    {% else %}
                        {{ render_evolution_chain(pokemon, true) }}
                    {% endif %}
                </div>
            </div>
            {% endif %}

            <!-- 招式列表 -->
            {% if pokemon.move_sets is defined and pokemon.move_sets|length > 0 %}
            <div class="moves-section">
                <h2 class="section-title">招式</h2>
                <div class="moves-list">
                    {% for move in pokemon.move_sets %}
                    <span class="move-item">{{ move.get_i18n_name() }}</span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</body>
</html> 